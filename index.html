<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>DSA Mastery Dashboard</title>

<style>
:root {
  --bg: #ffffff;
  --secondary-bg: #f5f5f7;
  --text: #1d1d1f;
  --text-secondary: #86868b;
  --accent: #0071e3;
  --border: #d2d2d7;
  --hover: #f5f5f7;
}

body.dark {
  --bg: #000000;
  --secondary-bg: #1c1c1e;
  --text: #f5f5f7;
  --text-secondary: #8e8e93;
  --accent: #0a84ff;
  --border: #38383a;
  --hover: #2c2c2e;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, sans-serif;
  background: var(--bg);
  color: var(--text);
  transition: background 0.3s, color 0.3s;
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
}

/* Header */
header {
  position: sticky;
  top: 0;
  z-index: 100;
  background: var(--bg);
  backdrop-filter: saturate(180%) blur(20px);
  border-bottom: 1px solid var(--border);
}

.header-content {
  max-width: 1200px;
  margin: 0 auto;
  padding: 12px 22px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

h1 { font-size: 20px; font-weight: 600; letter-spacing: -0.022em; }

.controls { display: flex; gap: 16px; align-items: center; }
.progress-text { font-size: 14px; color: var(--text-secondary); font-weight: 500; }

button {
  background: none; border: none; color: var(--accent);
  font-size: 14px; cursor: pointer; font-weight: 500; transition: opacity 0.2s;
}
button:hover { opacity: 0.7; }

/* Progress Bar */
.progress-container { width: 100%; height: 3px; background: var(--secondary-bg); overflow: hidden; }
#progress-bar { height: 100%; width: 0%; background: var(--accent); transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1); }

/* Layout Wrapper */
.layout-wrapper {
  max-width: 1200px;
  margin: 0 auto;
  display: flex;
  gap: 32px;
  padding: 40px 22px;
  align-items: flex-start;
}

/* Main Content */
.main-content {
  flex: 1;
  min-width: 0;
}

.intro { margin-bottom: 32px; }
.intro h2 { font-size: 36px; font-weight: 700; letter-spacing: -0.03em; margin-bottom: 8px; }
.intro p { font-size: 18px; color: var(--text-secondary); }

/* Calendar Sidebar */
.sidebar {
  width: 260px;
  position: sticky;
  top: 80px;
}

.calendar-card {
  background: var(--secondary-bg);
  border-radius: 20px;
  padding: 18px;
  border: 1px solid var(--border);
  box-shadow: 0 4px 12px rgba(0,0,0,0.05);
}

.calendar-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 14px; }
.calendar-header h3 { font-size: 14px; font-weight: 700; color: var(--text); }

.calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 4px; }
.calendar-weekday { font-size: 10px; font-weight: 700; color: var(--text-secondary); text-align: center; padding-bottom: 4px; }
.calendar-day { 
    aspect-ratio: 1; display: flex; align-items: center; justify-content: center; 
    border-radius: 50%; font-size: 11px; color: var(--text); font-weight: 500;
}
.calendar-day.today { background: var(--accent); color: white; font-weight: 700; }
.calendar-day.completed { border: 1.5px solid var(--accent); color: var(--accent); font-weight: 700; }

.stat-box { 
    background: var(--bg); padding: 12px; border-radius: 14px; 
    text-align: center; margin-top: 14px; border: 1px solid var(--border);
}

/* Problem List UI - Comfortable Sizing */
.week { margin-bottom: 40px; }
.week h2 { font-size: 24px; font-weight: 700; margin-bottom: 20px; }

details {
  margin-bottom: 10px; border-radius: 12px; overflow: hidden;
  background: var(--secondary-bg); border: 1px solid var(--border);
}

summary {
  padding: 14px 18px; cursor: pointer; user-select: none;
  list-style: none; font-size: 16px; font-weight: 600;
  display: flex; justify-content: space-between; align-items: center;
}

summary::after { content: '+'; font-size: 18px; transition: transform 0.3s; }
details[open] summary::after { transform: rotate(45deg); }

.pattern-count { color: var(--text-secondary); font-weight: 400; font-size: 13px; margin-left: 8px; }

ul { list-style: none; padding: 0 18px 14px 18px; }
li { display: flex; align-items: center; gap: 12px; padding: 10px 0; border-bottom: 1px solid var(--border); }
li:last-child { border-bottom: none; }

input[type="checkbox"] {
  width: 20px; height: 20px; cursor: pointer; border-radius: 50%;
  border: 1.5px solid var(--border); appearance: none; flex-shrink: 0; transition: all 0.2s;
}

input[type="checkbox"]:checked { background: var(--accent); border-color: var(--accent); position: relative; }
input[type="checkbox"]:checked::after {
  content: 'âœ“'; position: absolute; color: white; font-size: 12px; top: 50%; left: 50%; transform: translate(-50%, -50%);
}

a { color: var(--text); text-decoration: none; font-size: 15px; flex: 1; transition: color 0.2s; }
a:hover { color: var(--accent); }

input[type="checkbox"]:checked + a { color: var(--text-secondary); text-decoration: line-through; }

/* Responsive adjustments */
@media (max-width: 900px) {
  .layout-wrapper { flex-direction: column-reverse; gap: 24px; }
  .sidebar { width: 100%; position: static; }
  .calendar-card { max-width: 320px; margin: 0 auto; }
}
</style>
</head>

<body>

<header>
  <div class="header-content">
    <h1>DSA Mastery</h1>
    <div class="controls">
      <span class="progress-text"><span id="progress-count">0</span> / <span id="total-count">0</span></span>
      <button onclick="toggleDark()">Theme</button>
    </div>
  </div>
  <div class="progress-container"><div id="progress-bar"></div></div>
</header>

<div class="layout-wrapper">
  <!-- Left Side: Problem List -->
  <main class="main-content">
    <div class="intro">
      <h2 id="hero-title">30 Days Mastery</h2>
      <p id="hero-subtitle">Curated patterns for deep intuition.</p>
    </div>
    <div id="curriculum-container"></div>
  </main>

  <!-- Right Side: Persistent Sidebar -->
  <aside class="sidebar">
    <div class="calendar-card">
      <div class="calendar-header">
        <h3 id="calendarMonth">Month</h3>
      </div>
      <div class="calendar-grid">
        <div class="calendar-weekday">S</div>
        <div class="calendar-weekday">M</div>
        <div class="calendar-weekday">T</div>
        <div class="calendar-weekday">W</div>
        <div class="calendar-weekday">T</div>
        <div class="calendar-weekday">F</div>
        <div class="calendar-weekday">S</div>
      </div>
      <div class="calendar-grid" id="calendarDays"></div>
      
      <div class="stat-box">
        <div style="font-size: 11px; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 2px;">Consistency</div>
        <div style="font-size: 24px; font-weight: 800;">ðŸ”¥ <span id="currentStreak">0</span> Days</div>
      </div>
    </div>
  </aside>
</div>

<script>
/**
 * DYNAMIC DATABASE
 */
const DATABASE = {
  "curriculum": [
    {
      "week": 1,
      "title": "Arrays & Strings",
      "categories": [
        {
          "name": "Array Basics",
          "problems": [
            { "title": "Two Sum", "url": "https://leetcode.com/problems/two-sum/" },
            { "title": "Running Sum of 1d Array", "url": "https://leetcode.com/problems/running-sum-of-1d-array/" },
            { "title": "Maximum Subarray", "url": "https://leetcode.com/problems/maximum-subarray/" },
            { "title": "Best Time to Buy and Sell Stock", "url": "https://leetcode.com/problems/best-time-to-buy-and-sell-stock/" },
            { "title": "Contains Duplicate", "url": "https://leetcode.com/problems/contains-duplicate/" },
            { "title": "Plus One", "url": "https://leetcode.com/problems/plus-one/" }
          ]
        },
        {
          "name": "Two Pointers",
          "problems": [
            { "title": "Remove Duplicates from Sorted Array", "url": "https://leetcode.com/problems/remove-duplicates-from-sorted-array/" },
            { "title": "Move Zeroes", "url": "https://leetcode.com/problems/move-zeroes/" },
            { "title": "Valid Palindrome", "url": "https://leetcode.com/problems/valid-palindrome/" },
            { "title": "Reverse String", "url": "https://leetcode.com/problems/reverse-string/" },
            { "title": "Container With Most Water", "url": "https://leetcode.com/problems/container-with-most-water/" },
            { "title": "Squares of a Sorted Array", "url": "https://leetcode.com/problems/squares-of-a-sorted-array/" }
          ]
        },
        {
          "name": "Sliding Window",
          "problems": [
            { "title": "Maximum Average Subarray I", "url": "https://leetcode.com/problems/maximum-average-subarray-i/" },
            { "title": "Longest Substring Without Repeating Characters", "url": "https://leetcode.com/problems/longest-substring-without-repeating-characters/" },
            { "title": "Minimum Size Subarray Sum", "url": "https://leetcode.com/problems/minimum-size-subarray-sum/" },
            { "title": "Permutation in String", "url": "https://leetcode.com/problems/permutation-in-string/" },
            { "title": "Find All Anagrams in a String", "url": "https://leetcode.com/problems/find-all-anagrams-in-a-string/" },
            { "title": "Subarray Product Less Than K", "url": "https://leetcode.com/problems/subarray-product-less-than-k/" }
          ]
        },
        {
          "name": "String + Hashing",
          "problems": [
            { "title": "Valid Anagram", "url": "https://leetcode.com/problems/valid-anagram/" },
            { "title": "First Unique Character", "url": "https://leetcode.com/problems/first-unique-character-in-a-string/" },
            { "title": "Group Anagrams", "url": "https://leetcode.com/problems/group-anagrams/" },
            { "title": "Ransom Note", "url": "https://leetcode.com/problems/ransom-note/" },
            { "title": "Isomorphic Strings", "url": "https://leetcode.com/problems/isomorphic-strings/" },
            { "title": "Longest Palindrome", "url": "https://leetcode.com/problems/longest-palindrome/" }
          ]
        },
        {
          "name": "Prefix / Misc",
          "problems": [
            { "title": "Range Sum Query â€“ Immutable", "url": "https://leetcode.com/problems/range-sum-query-immutable/" },
            { "title": "Product of Array Except Self", "url": "https://leetcode.com/problems/product-of-array-except-self/" },
            { "title": "Find Pivot Index", "url": "https://leetcode.com/problems/find-pivot-index/" },
            { "title": "Majority Element", "url": "https://leetcode.com/problems/majority-element/" },
            { "title": "Rotate Array", "url": "https://leetcode.com/problems/rotate-array/" },
            { "title": "Intersection of Two Arrays", "url": "https://leetcode.com/problems/intersection-of-two-arrays/" }
          ]
        }
      ]
    },
    {
      "week": 2,
      "title": "Linked List, Stack & Hashing",
      "categories": [
        {
          "name": "Linked List Basics",
          "problems": [
            { "title": "Reverse Linked List", "url": "https://leetcode.com/problems/reverse-linked-list/" },
            { "title": "Middle of the Linked List", "url": "https://leetcode.com/problems/middle-of-the-linked-list/" },
            { "title": "Linked List Cycle", "url": "https://leetcode.com/problems/linked-list-cycle/" },
            { "title": "Remove Linked List Elements", "url": "https://leetcode.com/problems/remove-linked-list-elements/" },
            { "title": "Palindrome Linked List", "url": "https://leetcode.com/problems/palindrome-linked-list/" },
            { "title": "Intersection of Two Linked Lists", "url": "https://leetcode.com/problems/intersection-of-two-linked-lists/" }
          ]
        },
        {
          "name": "Fast & Slow Pointer",
          "problems": [
            { "title": "Remove Nth Node From End", "url": "https://leetcode.com/problems/remove-nth-node-from-end-of-list/" },
            { "title": "Detect Cycle II", "url": "https://leetcode.com/problems/linked-list-cycle-ii/" },
            { "title": "Happy Number", "url": "https://leetcode.com/problems/happy-number/" },
            { "title": "Find Duplicate Number", "url": "https://leetcode.com/problems/find-the-duplicate-number/" },
            { "title": "Reorder List", "url": "https://leetcode.com/problems/reorder-list/" },
            { "title": "Odd Even Linked List", "url": "https://leetcode.com/problems/odd-even-linked-list/" }
          ]
        },
        {
          "name": "Stack",
          "problems": [
            { "title": "Valid Parentheses", "url": "https://leetcode.com/problems/valid-parentheses/" },
            { "title": "Min Stack", "url": "https://leetcode.com/problems/min-stack/" },
            { "title": "Next Greater Element I", "url": "https://leetcode.com/problems/next-greater-element-i/" },
            { "title": "Daily Temperatures", "url": "https://leetcode.com/problems/daily-temperatures/" },
            { "title": "Evaluate RPN", "url": "https://leetcode.com/problems/evaluate-reverse-polish-notation/" },
            { "title": "Backspace String Compare", "url": "https://leetcode.com/problems/backspace-string-compare/" }
          ]
        },
        {
          "name": "Hashing",
          "problems": [
            { "title": "Top K Frequent Elements", "url": "https://leetcode.com/problems/top-k-frequent-elements/" },
            { "title": "Two Sum II", "url": "https://leetcode.com/problems/two-sum-ii-input-array-is-sorted/" },
            { "title": "Subarray Sum Equals K", "url": "https://leetcode.com/problems/subarray-sum-equals-k/" },
            { "title": "Longest Consecutive Sequence", "url": "https://leetcode.com/problems/longest-consecutive-sequence/" },
            { "title": "Contains Duplicate II", "url": "https://leetcode.com/problems/contains-duplicate-ii/" },
            { "title": "Word Pattern", "url": "https://leetcode.com/problems/word-pattern/" }
          ]
        }
      ]
    },
    {
      "week": 3,
      "title": "Trees",
      "categories": [
        {
          "name": "DFS Traversals",
          "problems": [
            { "title": "Inorder Traversal", "url": "https://leetcode.com/problems/binary-tree-inorder-traversal/" },
            { "title": "Preorder Traversal", "url": "https://leetcode.com/problems/binary-tree-preorder-traversal/" },
            { "title": "Postorder Traversal", "url": "https://leetcode.com/problems/binary-tree-postorder-traversal/" },
            { "title": "Binary Tree Paths", "url": "https://leetcode.com/problems/binary-tree-paths/" },
            { "title": "Same Tree", "url": "https://leetcode.com/problems/same-tree/" },
            { "title": "Symmetric Tree", "url": "https://leetcode.com/problems/symmetric-tree/" }
          ]
        },
        {
          "name": "Height / Depth",
          "problems": [
            { "title": "Maximum Depth", "url": "https://leetcode.com/problems/maximum-depth-of-binary-tree/" },
            { "title": "Minimum Depth", "url": "https://leetcode.com/problems/minimum-depth-of-binary-tree/" },
            { "title": "Balanced Binary Tree", "url": "https://leetcode.com/problems/balanced-binary-tree/" },
            { "title": "Diameter of Binary Tree", "url": "https://leetcode.com/problems/diameter-of-binary-tree/" },
            { "title": "Count Complete Tree Nodes", "url": "https://leetcode.com/problems/count-complete-tree-nodes/" },
            { "title": "Invert Binary Tree", "url": "https://leetcode.com/problems/invert-binary-tree/" }
          ]
        },
        {
          "name": "Path Based",
          "problems": [
            { "title": "Path Sum", "url": "https://leetcode.com/problems/path-sum/" },
            { "title": "Path Sum II", "url": "https://leetcode.com/problems/path-sum-ii/" },
            { "title": "Sum Root to Leaf", "url": "https://leetcode.com/problems/sum-root-to-leaf-numbers/" },
            { "title": "Binary Tree Tilt", "url": "https://leetcode.com/problems/binary-tree-tilt/" },
            { "title": "LCA of BST", "url": "https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-search-tree/" },
            { "title": "LCA of Binary Tree", "url": "https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-tree/" }
          ]
        },
        {
          "name": "BFS",
          "problems": [
            { "title": "Level Order Traversal", "url": "https://leetcode.com/problems/binary-tree-level-order-traversal/" },
            { "title": "Average of Levels", "url": "https://leetcode.com/problems/average-of-levels-in-binary-tree/" },
            { "title": "Right Side View", "url": "https://leetcode.com/problems/binary-tree-right-side-view/" },
            { "title": "Minimum Depth", "url": "https://leetcode.com/problems/minimum-depth-of-binary-tree/" },
            { "title": "Zigzag Level Order", "url": "https://leetcode.com/problems/binary-tree-zigzag-level-order-traversal/" }
          ]
        }
      ]
    },
    {
      "week": 4,
      "title": "Graphs & DP",
      "categories": [
        {
          "name": "Graph BFS / DFS",
          "problems": [
            { "title": "Number of Islands", "url": "https://leetcode.com/problems/number-of-islands/" },
            { "title": "Flood Fill", "url": "https://leetcode.com/problems/flood-fill/" },
            { "title": "Max Area of Island", "url": "https://leetcode.com/problems/max-area-of-island/" },
            { "title": "Clone Graph", "url": "https://leetcode.com/problems/clone-graph/" },
            { "title": "Surrounded Regions", "url": "https://leetcode.com/problems/surrounded-regions/" }
          ]
        },
        {
          "name": "Graph Advanced",
          "problems": [
            { "title": "Course Schedule", "url": "https://leetcode.com/problems/course-schedule/" },
            { "title": "Course Schedule II", "url": "https://leetcode.com/problems/course-schedule-ii/" },
            { "title": "Path Exists in Graph", "url": "https://leetcode.com/problems/find-if-path-exists-in-graph/" },
            { "title": "Number of Provinces", "url": "https://leetcode.com/problems/number-of-provinces/" }
          ]
        },
        {
          "name": "DP 1D",
          "problems": [
            { "title": "Climbing Stairs", "url": "https://leetcode.com/problems/climbing-stairs/" },
            { "title": "House Robber", "url": "https://leetcode.com/problems/house-robber/" },
            { "title": "House Robber II", "url": "https://leetcode.com/problems/house-robber-ii/" },
            { "title": "Fibonacci Number", "url": "https://leetcode.com/problems/fibonacci-number/" },
            { "title": "Min Cost Climbing Stairs", "url": "https://leetcode.com/problems/min-cost-climbing-stairs/" }
          ]
        },
        {
          "name": "DP 2D",
          "problems": [
            { "title": "Coin Change", "url": "https://leetcode.com/problems/coin-change/" },
            { "title": "Unique Paths", "url": "https://leetcode.com/problems/unique-paths/" },
            { "title": "Unique Paths II", "url": "https://leetcode.com/problems/unique-paths-ii/" },
            { "title": "Longest Increasing Subsequence", "url": "https://leetcode.com/problems/longest-increasing-subsequence/" },
            { "title": "Partition Equal Subset Sum", "url": "https://leetcode.com/problems/partition-equal-subset-sum/" }
          ]
        }
      ]
    }
  ]
};

// Selectors
const curriculumContainer = document.getElementById("curriculum-container");
const progressCountEl = document.getElementById("progress-count");
const totalCountEl = document.getElementById("total-count");
const progressBar = document.getElementById("progress-bar");

/**
 * Safe ID generator
 */
function generateProblemId(category, title) {
  const str = `${category}-${title}`;
  let hash = 0;
  for (let i = 0; i < str.length; i++) {
    const char = str.charCodeAt(i);
    hash = ((hash << 5) - hash) + char;
    hash |= 0;
  }
  return 'pid_' + Math.abs(hash).toString(16);
}

/**
 * App Init
 */
function initApp() {
  let html = "";
  let currentTotal = 0;

  DATABASE.curriculum.forEach(week => {
    html += `<div class="week">
      <h2>Week ${week.week} â€” ${week.title}</h2>`;
    
    week.categories.forEach(cat => {
      html += `<details>
        <summary>${cat.name} <span class="pattern-count">${cat.problems.length}</span></summary>
        <ul>`;
      
      cat.problems.forEach(prob => {
        const uniqueId = generateProblemId(cat.name, prob.title);
        currentTotal++;
        
        html += `<li>
          <input type="checkbox" id="${uniqueId}" data-id="${uniqueId}">
          <a href="${prob.url}" target="_blank">${prob.title}</a>
        </li>`;
      });
      
      html += `</ul></details>`;
    });
    
    html += `</div>`;
  });

  curriculumContainer.innerHTML = html;
  totalCountEl.textContent = currentTotal;

  // Listeners
  const boxes = document.querySelectorAll("input[type='checkbox']");
  boxes.forEach(b => b.addEventListener("change", updateProgress));

  // Load Saved Progress
  const saved = JSON.parse(localStorage.getItem("dsa-mastery-v3") || "{}");
  boxes.forEach(b => {
    if (saved[b.dataset.id]) b.checked = true;
  });

  updateProgress();
  renderCalendar();
}

/**
 * Progress Tracking
 */
function updateProgress() {
  const boxes = document.querySelectorAll("input[type='checkbox']");
  const checked = Array.from(boxes).filter(b => b.checked).length;
  const total = boxes.length;
  
  progressCountEl.textContent = checked;
  progressBar.style.width = (total > 0 ? (checked / total * 100) : 0) + "%";
  
  const progressMap = {};
  boxes.forEach(b => { if(b.checked) progressMap[b.dataset.id] = true; });
  localStorage.setItem("dsa-mastery-v3", JSON.stringify(progressMap));
  
  if (checked > 0) {
    const today = new Date().toISOString().split('T')[0];
    const completedDates = JSON.parse(localStorage.getItem("dsa-dates-v3") || "{}");
    completedDates[today] = true;
    localStorage.setItem("dsa-dates-v3", JSON.stringify(completedDates));
  }
  
  updateStreakStats();
  renderCalendar();
}

function updateStreakStats() {
  const log = JSON.parse(localStorage.getItem("dsa-dates-v3") || "{}");
  let streak = 0;
  let cursor = new Date();
  
  while (true) {
    const key = cursor.toISOString().split('T')[0];
    if (log[key]) {
      streak++;
      cursor.setDate(cursor.getDate() - 1);
    } else {
      break;
    }
  }
  document.getElementById("currentStreak").textContent = streak;
}

/**
 * Calendar Logic
 */
function renderCalendar() {
  const container = document.getElementById("calendarDays");
  const now = new Date();
  const month = now.getMonth();
  const year = now.getFullYear();
  
  document.getElementById("calendarMonth").textContent = now.toLocaleString('default', { month: 'long', year: 'numeric' });

  const firstDay = new Date(year, month, 1).getDay();
  const daysInMonth = new Date(year, month + 1, 0).getDate();
  const log = JSON.parse(localStorage.getItem("dsa-dates-v3") || "{}");

  let html = '';
  for (let i = 0; i < firstDay; i++) html += '<div class="calendar-day"></div>';
  
  for (let d = 1; d <= daysInMonth; d++) {
    const key = `${year}-${String(month + 1).padStart(2, '0')}-${String(d).padStart(2, '0')}`;
    let classes = 'calendar-day';
    if (log[key]) classes += ' completed';
    if (d === now.getDate()) classes += ' today';
    html += `<div class="${classes}">${d}</div>`;
  }
  container.innerHTML = html;
}

function toggleDark() {
  document.body.classList.toggle("dark");
  localStorage.setItem("dsa-dark-v3", document.body.classList.contains("dark"));
}

// Initial Theme Check
if (localStorage.getItem("dsa-dark-v3") === "true") document.body.classList.add("dark");

// Boot
initApp();
</script>

</body>
</html>
